
{% load crispy_forms_tags %}
<form method="post" action="{% url 'add_shift' %}" class="js-shift-create-form">
    {% csrf_token %}
    <div class="modal-header">
        <h4 class="modal-title">Add Shift</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="form-group">
            {{ form.shift_name|as_crispy_field }}
        </div>
        <div class="form-group row">
            <div class="col-6" id="id_period_type">
                {{ form.period_type|as_crispy_field }}
            </div>
            <div class="col-6">
                {{ form.hours|as_crispy_field }}
            </div>
        </div>
        <div class="form-group row">
            <div class="col-6" id="div_id_am_in">
                {{ form.am_in|as_crispy_field }}
            </div>
            <div class="col-6" id="div_id_am_out">
                {{ form.am_out|as_crispy_field }}
            </div>
        </div>
        <div class="form-group" id="div_id_pm_in_start_time">
            {{ form.pm_in_start_time|as_crispy_field }}
        </div>
        <div class="form-group row">
            <div class="col-6" id="div_id_pm_in">
                {{ form.pm_in|as_crispy_field }}
            </div>
            <div class="col-6" id="div_id_pm_out">
                {{ form.pm_out|as_crispy_field }}
            </div>
        </div>
    </div>
    <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="submit" class="btn btn-primary">Save</button>
    </div>
</form>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        function toggleFields() {
            const periodType = document.querySelector("#id_period_type select").value;
            const amOut = document.getElementById("div_id_am_out");
            const pmInStartTime = document.getElementById("div_id_pm_in_start_time");
            const pmIn = document.getElementById("div_id_pm_in");
    
            if (periodType === "Single") {
                amOut.style.display = "none";
                pmInStartTime.style.display = "none";
                pmIn.style.display = "none";
            } else {
                amOut.style.display = "";
                pmInStartTime.style.display = "";
                pmIn.style.display = "";
            }
        }
    
        document.querySelector("#id_period_type select").addEventListener("change", toggleFields);
    
        // Initial call to set the correct state on page load
        toggleFields();
    });
    </script>
    
    
